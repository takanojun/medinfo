【プロンプト（Codex用）】

この機能は既存の医療機関管理システムに追加されるもので、以下の要件に従ってReact（＋Tailwind CSS）を用いて「医療機関ごとのメモ管理画面」を実装してください。

# 🎯 機能概要

- 医療機関ごとに複数のメモを持てる機能（マークダウン対応）
- 別タブで開く構成
- 履歴管理（バージョン復元）、排他制御、タグ検索などを含む

# 🧭 画面構成

## 上部バー
- 医療機関の略称名を表示

## 左ペイン（メモ一覧）
- タイトル一覧
- トグルで削除済み表示切替
- タイトル検索
- タグフィルタ（マルチセレクト、AND/OR切替）
- 「＋新規作成」ボタン

## 右ペイン（メモ本文）
- マークダウン表示
- 上部に「編集」ボタン（※「履歴を見る」は編集モードで表示）

# ✏️ 編集モード（モーダル）

- 左：本文エディタ、右：リアルタイムプレビュー
- 編集中は「未保存あり」表示
- 「キャンセル」押下時：保存有無確認モーダル表示
- タグはマルチセレクト。マスタから選択
- 履歴表示ボタン設置

# ⏱ タイムアウト対策

- 操作が5分間なければ編集ロック解除
- 再開時にはモーダルで「内容をクリップボードにコピー」できる機能を表示

# 🔁 履歴管理

- 編集ごとのバージョンを保存
- 差分確認・復元が可能

# 🏷 タグ機能

- タグはマスタ管理（自由入力なし）
- タグには備考欄あり、マウスオーバーでツールチップ表示
- タグマスタは編集画面から呼び出し可能

# 🚮 削除

- 論理削除
- 「削除済みを表示」トグルで切替
- 削除メモは復元可能

まずこの仕様に基づいて画面構成・コンポーネント設計を提案し、その後、左ペイン → 右ペイン → 編集モード → 履歴管理の順で段階的にコードを書いてください。

# 📑 テンプレート機能（追加仕様）

- メモ作成フォームからテンプレートを登録・呼び出し・編集・削除できるようにする。
- テンプレートは **タイトル・本文・タグ** の3要素で構成する。

## 📝 テンプレート登録

- メモ新規作成画面に現在の入力内容をテンプレートとして保存する機能を追加する。
- 登録時のテンプレート名はタイトルを初期値とし、必要に応じて変更できるようにする。

## 🧩 テンプレート呼び出し表示

- メモ編集画面に「テンプレート呼び出し」ボタンを設置する。
- 押下すると画面左側をテンプレート一覧表示領域に切り替え、右側には既存のプレビューペインを流用してテンプレート内容を表示する。
- 一覧にはテンプレート名、タグ一覧、最終更新日時を表示し、下部の「選択」ボタンで反映できるようにする。

## 🔍 テンプレート検索・フィルタ

- テンプレート一覧にフリーワード検索ボックスとタグ絞り込み機能を配置する。レイアウトはメモ一覧の絞り込み UI と同様とする。
- 検索対象はタイトル、本文、タグとし、必要であればメモ一覧側の検索仕様も同じ対象に拡張する。

## 🛠 編集・削除・複製

- テンプレート選択時に以下の操作を可能とする。
  - **編集**: テンプレート内容を上書き保存（ID は維持）。
  - **削除**: テンプレートを論理削除する。
  - **登録**: 変更の有無にかかわらず新しいテンプレートとして保存する（複製機能）。

## 🕓 編集履歴と排他制御

- テンプレートにも編集履歴機能を実装し、メモと同様に履歴の確認・復元を行える UI を提供する。
- 編集中のテンプレートは他ユーザーが操作できないよう排他制御を適用し、編集中である旨を表示する。
